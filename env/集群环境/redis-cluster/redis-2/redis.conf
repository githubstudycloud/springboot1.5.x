port 6379
cluster-enabled yes
cluster-config-file nodes.conf
cluster-node-timeout 5000
appendonly yes
protected-mode no

# 设置最大客户端连接数
maxclients 10000

# 设置最大内存占用
maxmemory 4gb

# 设置内存淘汰策略
maxmemory-policy volatile-lru

# 设置RDB快照频率
save 3600 1 300 100 60 10000

# 设置AOF重写频率
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# 启用慢查询日志
slowlog-log-slower-than 10000
slowlog-max-len 128

# 启用延迟监控
latency-monitor-threshold 100

# 设置TCP keepalive
tcp-keepalive 300

# 启用ACL (Access Control List)
aclfile /usr/local/etc/redis/users.acl