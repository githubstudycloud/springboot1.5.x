抱歉之前的解决方案在 IntelliJ IDEA 2023.2.4 版本中无法正常工作。让我为您提供一个适用于该版本的解决方案。

---

### **在 IntelliJ IDEA 2023.2.4 中创建方法注释的 Live Template**

由于 IntelliJ IDEA 的版本更新，某些语法和函数可能有所改变。以下是基于 2023.2.4 版本的完整步骤和代码：

#### **1. 创建新的 Live Template**

- 打开设置：
  - Windows/Linux：`File` > `Settings`
  - macOS：`IntelliJ IDEA` > `Preferences`

- 导航到：`Editor` > `Live Templates`

- 选择或创建一个模板组（例如，`user`），然后点击右侧的 `+` 按钮，选择 `Live Template`

#### **2. 设置模板内容**

在新建的模板中，粘贴以下内容：

```java
/**
 * $DESCRIPTION$
 * @author $USER$
 * @date $DATE$
$PARAMS$$RETURN$$THROWS$ */
```

#### **3. 配置模板变量**

点击模板编辑窗口中的 `Edit Variables` 按钮，设置以下变量：

- **DESCRIPTION**:
  - **Expression**: *（留空）*
  - **Default Value**: *（留空）*
- **USER**:
  - **Expression**: `user()`
  - **Default Value**: *（留空）*
- **DATE**:
  - **Expression**: `date()`
  - **Default Value**: *（留空）*
- **PARAMS**:
  - **Expression**:

    ```groovy
    groovyScript("def method = _1; if (method == null || method.parameterList.parameters.isEmpty()) return ''; def params = method.parameterList.parameters.collect { p -> ' * @param ' + p.name + ' ' + p.type.presentableText + '\\n' }.join(''); return params", method())
    ```

- **RETURN**:
  - **Expression**:

    ```groovy
    groovyScript("def method = _1; if (method == null) return ''; def returnType = method.returnType; if (returnType != null && !returnType.presentableText.equals('void')) return ' * @return ' + returnType.presentableText + '\\n'; return ''", method())
    ```

- **THROWS**:
  - **Expression**:

    ```groovy
    groovyScript("def method = _1; if (method == null || method.throwsList.referencedTypes.isEmpty()) return ''; def throwsList = method.throwsList.referencedTypes.collect { t -> ' * @throws ' + t.presentableText + '\\n' }.join(''); return throwsList", method())
    ```

#### **4. 设置上下文和缩写**

- **Abbreviation（缩写）**: 例如，设置为 `/**`
- **Applicable in（适用范围）**: 勾选 `Java`，并选择 `Declaration`（或其他适合的上下文）

#### **5. 使用模板**

- 在代码编辑器中，将光标放在方法声明的上方。
- 输入缩写 `/**`，然后按 `Tab` 键，模板将自动展开。
- 根据提示，填写方法的描述，按 `Enter` 键确认。

---

### **注意事项**

1. **Groovy 脚本支持**

   - IntelliJ IDEA 2023.2.4 默认支持 Groovy 脚本。如果遇到脚本无法执行的问题，请确保已安装并启用了 Groovy 插件。

2. **方法获取**

   - 使用 `method()` 函数获取当前方法，适用于 2023.2.4 版本。

3. **变量解释**

   - **DESCRIPTION**：方法的描述，手动输入。
   - **USER**：当前用户名，自动获取。
   - **DATE**：当前日期，使用默认格式，您也可以修改为 `date("yyyy-MM-dd HH:mm:ss")` 以指定格式。

4. **Groovy 脚本说明**

   - **PARAMS**：

     - 检查方法是否存在以及是否有参数。
     - 使用 `collect` 方法遍历参数列表，生成 `@param` 标签。
     - 使用 `join('')` 将所有参数注释合并为一个字符串。

   - **RETURN**：

     - 检查方法是否存在以及返回类型是否为 `void`。
     - 如果返回类型不是 `void`，则生成 `@return` 标签。

   - **THROWS**：

     - 检查方法是否存在以及是否有声明异常。
     - 使用 `collect` 方法遍历异常列表，生成 `@throws` 标签。

---

### **完整示例**

假设有以下方法：

```java
public int calculateSum(int a, int b) throws IllegalArgumentException {
    // 方法体
}
```

使用模板后，生成的注释应为：

```java
/**
 * 计算两个整数的和
 * @author YourName
 * @date 2023-10-05
 * @param a int
 * @param b int
 * @return int
 * @throws IllegalArgumentException
 */
public int calculateSum(int a, int b) throws IllegalArgumentException {
    // 方法体
}
```

---

### **常见问题解决**

- **问题 1**：模板无法触发或没有生成预期的注释。

  **解决方法**：

  - 确保模板的缩写和上下文设置正确。
  - 检查变量名和表达式，确保没有拼写错误。
  - 确认 Groovy 脚本引擎已启用。

- **问题 2**：生成的注释中没有参数、返回值或异常的信息。

  **解决方法**：

  - 检查方法是否正确获取：`method()` 函数应能正确获取当前方法。
  - 在变量的 `Expression` 中，确保脚本语法正确，无额外的空格或字符。

- **问题 3**：日期格式不符合预期。

  **解决方法**：

  - 在 `DATE` 的 `Expression` 中，使用自定义格式，例如：`date("yyyy-MM-dd HH:mm:ss")`

---

### **额外提示**

- **自定义模板**：您可以根据需要，添加更多的注释标签，例如 `@since`、`@version` 等。

- **调整模板内容**：如果不需要某些注释标签，可以直接在模板内容中删除相应的变量。

- **快捷键冲突**：如果 `/**` 的缩写与其他模板或快捷键冲突，可以修改为其他缩写，例如 `jdoc`。

---

希望以上解决方案能够满足您的需求，在 IntelliJ IDEA 2023.2.4 版本中正常工作。如有任何疑问或需要进一步的帮助，请随时提问！
